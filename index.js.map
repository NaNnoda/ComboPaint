{
  "version": 3,
  "sources": ["src/CanvasWrapper.ts", "src/MathUtils/Vec2.ts", "src/Events/EventHandler.ts", "src/Events/PointerEventHandler.ts", "src/Events/PaintToolEventHandler.ts", "src/DocViewer.ts", "src/ComboPaintDocument.ts", "src/Layers/CPLayer.ts", "src/Layers/BackgroundLayer.ts", "src/PaintTools/PaintTool.ts", "src/PaintTools/PaintTool2D.ts", "src/PaintTools/BasicPen.ts", "src/Main.ts"],
  "sourcesContent": ["export class CanvasWrapper {\r\n    canvas: HTMLCanvasElement = document.createElement(\"canvas\");// place the canvas in the DOM\r\n    private _actualCtx: CanvasRenderingContext2D | WebGLRenderingContext | null = null// place the canvas in the DOM\r\n    private _is2d: boolean = false;\r\n    private _isGl: boolean = false;\r\n\r\n    constructor( canvas: HTMLCanvasElement | string | null = null, ctxId: string = \"2d\",) {\r\n        this.setCanvas(canvas, ctxId);\r\n    }\r\n\r\n    setCanvas(canvas: HTMLCanvasElement | string | null = null, ctxId: string = \"2d\") {\r\n        if (typeof canvas === \"string\") {\r\n            canvas = document.getElementById(canvas) as HTMLCanvasElement;\r\n            if (!canvas) {\r\n                throw new Error(\"Failed to get canvas\");\r\n            }\r\n        } else if (canvas === null) {\r\n            canvas = document.createElement(\"canvas\");\r\n        }\r\n        this.canvas = canvas;\r\n        this.setCtx(ctxId);\r\n    }\r\n\r\n    get ctx() {\r\n        if (this._is2d) {\r\n            // console.log( this._actualCtx);\r\n            return this._actualCtx as CanvasRenderingContext2D;\r\n        }\r\n        throw new Error(\"Context is not 2d\");\r\n    }\r\n    set ctx(ctx: CanvasRenderingContext2D ) {\r\n        console.log(\"You should not be setting the context\");\r\n    }\r\n\r\n    get gl() {\r\n        if (this._isGl) {\r\n            return this._actualCtx as WebGLRenderingContext;\r\n        }\r\n        throw new Error(\"Context is not WebGL\");\r\n    }\r\n\r\n    setCtx(ctxId: string) {\r\n        this._actualCtx = this.canvas.getContext(ctxId) as CanvasRenderingContext2D | WebGLRenderingContext;\r\n        if (this._actualCtx === null) {\r\n            throw new Error(`Failed to get context [${ctxId}]`);\r\n        }\r\n        if (ctxId === \"2d\") {\r\n            this._is2d = true;\r\n        }\r\n        if (ctxId === \"webgl\") {\r\n            this._isGl = true;\r\n        }\r\n    }\r\n\r\n    set width(width: number) {\r\n        this.canvas.width = width;\r\n    }\r\n\r\n    set height(height: number) {\r\n        this.canvas.height = height;\r\n    }\r\n\r\n    get width() {\r\n        return this.canvas.width;\r\n    }\r\n\r\n    get height() {\r\n        return this.canvas.height;\r\n    }\r\n}", "export class Vec2 {\r\n    x: number;\r\n    y: number;\r\n\r\n    constructor(val1: number, val2: number | undefined = undefined) {\r\n        this.x = val1;\r\n        if (val2 === undefined) {\r\n            this.y = val1;\r\n        } else {\r\n            this.y = val2;\r\n        }\r\n    }\r\n\r\n    add(other: Vec2) {\r\n        return new Vec2(this.x + other.x, this.y + other.y);\r\n    }\r\n\r\n    sub(other: Vec2) {\r\n        return new Vec2(this.x - other.x, this.y - other.y);\r\n    }\r\n\r\n    mul(other: Vec2) {\r\n        return new Vec2(this.x * other.x, this.y * other.y);\r\n    }\r\n\r\n    div(other: Vec2) {\r\n        return new Vec2(this.x / other.x, this.y / other.y);\r\n    }\r\n\r\n    scale(scalar: number) {\r\n        return new Vec2(this.x * scalar, this.y * scalar);\r\n    }\r\n\r\n    dot(other: Vec2) {\r\n        return this.x * other.x + this.y * other.y;\r\n    }\r\n\r\n    length() {\r\n        return Math.sqrt(this.dot(this));\r\n    }\r\n\r\n    normalize() {\r\n        return this.scale(1 / this.length());\r\n    }\r\n\r\n    rotate(angle: number) {\r\n        let cos = Math.cos(angle);\r\n        let sin = Math.sin(angle);\r\n        return new Vec2(this.x * cos - this.y * sin, this.x * sin + this.y * cos);\r\n    }\r\n\r\n    angle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    angleTo(other: Vec2) {\r\n        return other.angle() - this.angle();\r\n    }\r\n}", "export default class EventHandler<Keys extends string> {\r\n    events: { [key: string]: Function[] } = {};\r\n\r\n    registerEvent(event: Keys, callback: Function) {\r\n        if (this.events[event] === undefined) {\r\n            this.events[event] = [];\r\n        }\r\n        this.events[event].push(callback);\r\n    }\r\n\r\n    triggerEvent(event: Keys, ...args: any[]) {\r\n        if (this.events[event] !== undefined) {\r\n            for (let callback of this.events[event]) {\r\n                callback(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    removeEvent(event: Keys) {\r\n        delete this.events[event];\r\n    }\r\n\r\n    removeCallback(event: Keys, callback: Function) {\r\n        if (this.events[event] !== undefined) {\r\n            this.events[event] = this.events[event].filter((value) => {\r\n                return value !== callback;\r\n            });\r\n        }\r\n    }\r\n\r\n    removeAllEvents() {\r\n        this.events = {};\r\n    }\r\n\r\n}", "import EventHandler from \"./EventHandler\";\r\nimport {Vec2} from \"../MathUtils/Vec2\";\r\n\r\nexport type PointerEventKeys = \"raw\" | \"down\" | \"up\" | \"move\" | \"leave\" | \"enter\" | \"pressedMove\" | \"last\";\r\n\r\nexport class PointerPoint {\r\n    pos: Vec2;\r\n    pressure: number;\r\n\r\n    constructor(pos: Vec2, pressure: number) {\r\n        this.pos = pos;\r\n        this.pressure = pressure;\r\n    }\r\n\r\n    static pointerEventToPointerPoint(e: PointerEvent): PointerPoint {\r\n        return new PointerPoint(new Vec2(e.offsetX, e.offsetY), e.pressure);\r\n    }\r\n\r\n    get x() {\r\n        return this.pos.x;\r\n    }\r\n\r\n    get y() {\r\n        return this.pos.y;\r\n    }\r\n}\r\n\r\nexport class PointerEventHandler extends EventHandler<PointerEventKeys> {\r\n    constructor() {\r\n        super();\r\n        console.log(\"PointerEventHandler created\");\r\n        this.registerEvent(\"raw\", this.onRaw.bind(this));\r\n    }\r\n\r\n    static createFromHTMLElement(element: HTMLElement) {\r\n        let handler = new PointerEventHandler();\r\n        PointerEventHandler.bindWithElement(handler, element);\r\n        return handler;\r\n    }\r\n\r\n    static bindWithElement(handler: PointerEventHandler, element: HTMLElement) {\r\n        element.addEventListener(\"pointerdown\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointerup\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointermove\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointerenter\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointerleave\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointerover\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointerout\", handler.rawPointerEvent.bind(handler));\r\n        element.addEventListener(\"pointercancel\", handler.rawPointerEvent.bind(handler));\r\n    }\r\n\r\n    wasDown: boolean = false;\r\n    lastPoint: PointerPoint | null = null;\r\n\r\n    rawPointerEvent(rawEvent: PointerEvent) {\r\n        this.triggerEvent(\"raw\", rawEvent);\r\n    }\r\n\r\n    onRaw(rawEvent: PointerEvent, customPos: Vec2|null = null) {\r\n        let point = PointerPoint.pointerEventToPointerPoint(rawEvent);\r\n        if (customPos !== null) {\r\n            point.pos = customPos;\r\n        }\r\n\r\n\r\n        switch (rawEvent.type) {\r\n            case \"pointerdown\":\r\n                this.triggerEvent(\"down\", point);\r\n                this.wasDown = true;\r\n                break;\r\n            case \"pointerup\":\r\n                this.triggerEvent(\"up\", point);\r\n                this.wasDown = false;\r\n                break;\r\n            case \"pointermove\":\r\n                this.triggerEvent(\"move\", point);\r\n                if (this.wasDown) {\r\n                    this.triggerEvent(\"pressedMove\", point);\r\n                }\r\n                break;\r\n            case \"pointerenter\":\r\n                this.triggerEvent(\"enter\", point);\r\n                break;\r\n            case \"pointerleave\":\r\n                this.triggerEvent(\"leave\", point);\r\n                this.wasDown = false;\r\n                break;\r\n        }\r\n        this.lastPoint = point;\r\n    }\r\n}\r\n\r\nclass PointerHandlerState {\r\n    wasDown: boolean = false;\r\n    isDown: boolean = false;\r\n\r\n    lastPressure: number = 0;\r\n}\r\n", "import {PointerEventHandler, PointerPoint} from \"./PointerEventHandler\";\r\nimport {PaintTool} from \"../PaintTools/PaintTool\";\r\n\r\nexport class PaintToolEventHandler extends PointerEventHandler {\r\n    _tool: PaintTool | null = null;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    get tool() {\r\n        if (this._tool === null) {\r\n            throw new Error(\"Tool not set\");\r\n        }\r\n        return this._tool;\r\n    }\r\n    set tool(tool: PaintTool) {\r\n        this._tool = tool;\r\n    }\r\n\r\n    bind(tool: PaintTool) {\r\n        this.tool = tool;\r\n        this.registerEvent(\"down\", this.onDown.bind(this));\r\n        this.registerEvent(\"up\", this.onUp.bind(this));\r\n        this.registerEvent(\"pressedMove\", this.onPressedMove.bind(this));\r\n        this.registerEvent(\"move\", this.onMove.bind(this));\r\n    }\r\n\r\n    onDown(point: PointerPoint) {\r\n        this.tool.onDown(point);\r\n    }\r\n\r\n    onUp(point: PointerPoint) {\r\n        this.tool.onUp(point);\r\n    }\r\n\r\n    onPressedMove(point: PointerPoint) {\r\n        this.tool.onPressedMove(point);\r\n    }\r\n\r\n    onMove(point: PointerPoint) {\r\n        this.tool.onMove(point);\r\n    }\r\n}\r\n", "import ComboPaintDocument from \"./ComboPaintDocument\";\r\nimport {CanvasWrapper} from \"./CanvasWrapper\";\r\nimport {Vec2} from \"./MathUtils/Vec2\";\r\nimport {PaintToolEventHandler} from \"./Events/PaintToolEventHandler\";\r\nimport {PointerEventHandler} from \"./Events/PointerEventHandler\";\r\n\r\n/**\r\n * Class that renders a ComboPaintDocument to a canvas.\r\n * and also handles user input.\r\n */\r\nexport class DocViewer extends CanvasWrapper {\r\n    _doc: ComboPaintDocument;\r\n\r\n    _state: TranslateState;\r\n\r\n    paintToolEventHandler: PaintToolEventHandler;\r\n    viewPointerHandler: PointerEventHandler;\r\n\r\n    constructor(canvas: HTMLCanvasElement, doc: ComboPaintDocument) {\r\n        super(canvas);\r\n        this._doc = doc;\r\n        this.setDocument(doc);\r\n        this._state = new TranslateState();\r\n        let offset = new Vec2(0, 0);\r\n        // center the canvas\r\n        let scale = 2;\r\n        offset.x = (this.width) / 2 - this.doc.width / 2 * scale;\r\n        offset.y = (this.height) / 2 - this.doc.height / 2 * scale;\r\n        this.state.offset = offset;\r\n        this.state.scale = new Vec2(scale);\r\n\r\n        this.paintToolEventHandler = new PaintToolEventHandler();\r\n        this.viewPointerHandler = PointerEventHandler.createFromHTMLElement(this.canvas);\r\n        this.viewPointerHandler.registerEvent(\"raw\", this.triggerPaintTool.bind(this));\r\n\r\n    }\r\n\r\n    triggerPaintTool(raw: PointerEvent) {\r\n        let pos = this.viewToDocCoords(raw.offsetX, raw.offsetY);\r\n        this.paintToolEventHandler.triggerEvent(\"raw\", raw, pos);\r\n    }\r\n\r\n\r\n    setDocument(doc: ComboPaintDocument) {\r\n        this._doc = doc;\r\n    }\r\n\r\n    render() {\r\n        console.log(\"Rendering\");\r\n        // set background color\r\n        this.ctx.fillStyle = \"#c4c4c4\";\r\n        this.ctx.fillRect(0, 0, this.width, this.height);\r\n        // this._state.translateToAndSaveCtx(this.ctx);\r\n        this.renderDoc();\r\n        this.renderBorder();\r\n        console.log(\"Rendered\");\r\n    }\r\n\r\n    get state() {\r\n        return this._state;\r\n    }\r\n\r\n    get doc() {\r\n        return this._doc;\r\n    }\r\n\r\n    viewToDocCoords(x: number, y: number) {\r\n        return new Vec2(\r\n            (x - this.state.offset.x) / this.state.scale.x,\r\n            (y - this.state.offset.y) / this.state.scale.y\r\n        );\r\n    }\r\n\r\n    docToViewCoords(x: number, y: number) {\r\n        return new Vec2(\r\n            x * this.state.scale.x + this.state.offset.x,\r\n            y * this.state.scale.y + this.state.offset.y\r\n        );\r\n    }\r\n\r\n    renderDoc() {\r\n        this.ctx.save();\r\n        this.ctx.translate(this.state.offset.x, this.state.offset.y);\r\n        this.ctx.scale(this.state.scale.x, this.state.scale.y);\r\n        this.doc.render();\r\n        this.ctx.drawImage(this.doc.canvas, 0, 0);\r\n        this.ctx.restore();\r\n    }\r\n\r\n    renderBorder() {\r\n        this.ctx.strokeStyle = \"black\";\r\n        this.ctx.lineWidth = 1;\r\n        this.ctx.strokeRect(\r\n            this.state.offset.x, this.state.offset.y,\r\n            this.doc.width * this.state.scale.x,\r\n            this.doc.height * this.state.scale.y\r\n        );\r\n    }\r\n}\r\n\r\nclass TranslateState {\r\n    offset: Vec2 = new Vec2(0, 0);\r\n    scale: Vec2 = new Vec2(1, 1);\r\n}\r\n", "import {CanvasWrapper} from \"./CanvasWrapper\";\r\nimport {CPLayer} from \"./Layers/CPLayer\";\r\n\r\nexport default class ComboPaintDocument extends CanvasWrapper {\r\n    layers: CPLayer[] = [];\r\n\r\n    selectedLayer: CPLayer | null = null;\r\n\r\n    get height() {\r\n        return this.canvas.height;\r\n    }\r\n\r\n    set height(height: number) {\r\n        this.canvas.height = height;\r\n    }\r\n\r\n    get width() {\r\n        return this.canvas.width;\r\n    }\r\n\r\n    set width(width: number) {\r\n        this.canvas.width = width;\r\n    }\r\n\r\n    constructor(height: number = 100, width: number = 100) {\r\n        super();\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    addLayer(layer: CPLayer, index: number = this.layers.length) {\r\n        this.layers.splice(index, 0, layer);\r\n        if (this.selectedLayer == null) {\r\n            this.selectedLayer = layer;\r\n        }\r\n    }\r\n\r\n    addLayers(...layers: CPLayer[]) {\r\n        for (let layer of layers) {\r\n            this.addLayer(layer);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        this.ctx.clearRect(0, 0, this.width, this.height);\r\n        for (let layer of this.layers) {\r\n            console.log(\"Rendering layer \" + layer.name);\r\n            if (layer.visible) {\r\n\r\n                this.ctx.globalAlpha = layer.opacity;\r\n                console.log(this.ctx.globalCompositeOperation);\r\n                this.ctx.globalCompositeOperation = layer.blendMode;\r\n                layer.render();\r\n                this.ctx.drawImage(layer.canvas, 0, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    toImage() {\r\n        return this.canvas.toDataURL();\r\n    }\r\n}\r\n\r\n", "import {CanvasWrapper} from \"../CanvasWrapper\";\r\n\r\nexport class CPLayer extends CanvasWrapper {\r\n    name: string;\r\n    visible: boolean;\r\n    opacity: number;\r\n    blendMode: GlobalCompositeOperation;\r\n\r\n    constructor(width: number, height: number, name: string = \"New Layer\") {\r\n        super();\r\n        this.width = width;\r\n        this.height = height;\r\n        this.name = name;\r\n        this.visible = true;\r\n        this.opacity = 1;\r\n        // this.blendMode = \"normal\";\r\n        this.blendMode = \"source-over\";\r\n    }\r\n\r\n    render() {\r\n\r\n    }\r\n}\r\n", "import {CPLayer} from \"./CPLayer\";\r\n\r\nexport class BackgroundLayer extends CPLayer {\r\n    fillStyle: string;\r\n\r\n    constructor(width: number, height: number, fillStyle: string = \"white\") {\r\n        super(width, height, \"Background\");\r\n        this.fillStyle = fillStyle;\r\n    }\r\n\r\n    drawCheckerboard(color1: string, color2: string, size: number) {\r\n        this.ctx.fillStyle = color1;\r\n        this.ctx.fillRect(0, 0, this.width, this.height);\r\n        console.log(this.width);\r\n        this.ctx.fillStyle = color2;\r\n        for (let x = 0; x < this.width; x += size) {\r\n            for (let y = 0; y < this.height; y += size) {\r\n                if ((x / size) % 2 == (y / size) % 2) {\r\n                    this.ctx.fillRect(x, y, size, size);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.fillStyle == \"checkerboard\") {\r\n            console.log(\"checkerboard\");\r\n            this.drawCheckerboard(\"#ffffff\", \"#cbcbcb\", 10);\r\n        } else {\r\n            this.ctx.fillStyle = this.fillStyle;\r\n            this.ctx.fillRect(0, 0, this.width, this.height);\r\n        }\r\n    }\r\n}\r\n", "import {PaintToolEventHandler} from \"../Events/PaintToolEventHandler\";\r\nimport {PointerPoint} from \"../Events/PointerEventHandler\";\r\nimport {CPLayer} from \"../Layers/CPLayer\";\r\nimport ComboPaintDocument from \"../ComboPaintDocument\";\r\nimport {DocViewer} from \"../DocViewer\";\r\n\r\nexport class PaintTool {\r\n    name: string;\r\n    _eventHandler: PaintToolEventHandler | null = null;\r\n\r\n    selectedLayer: CPLayer | null = null;\r\n\r\n    _layer: CPLayer | null = null;\r\n    _doc: ComboPaintDocument | null = null;\r\n    _viewer: DocViewer | null = null;\r\n\r\n    setLayer(layer: CPLayer) {\r\n        console.debug(\"Setting layer to \" + layer.name);\r\n        this._layer = layer;\r\n    }\r\n\r\n    get layer() {\r\n        if (this._layer === null) {\r\n            throw new Error(\"Layer not set\");\r\n        }\r\n        return this._layer;\r\n    }\r\n\r\n    get eventHandler() {\r\n        if (this._eventHandler === null) {\r\n            throw new Error(\"Event handler not set\");\r\n        }\r\n        return this._eventHandler;\r\n    }\r\n\r\n    set eventHandler(eventHandler: PaintToolEventHandler) {\r\n        console.log(\"Setting event handler\");\r\n        this._eventHandler = eventHandler;\r\n    }\r\n\r\n    get canvas() {\r\n        return this.layer.canvas;\r\n    }\r\n\r\n    get doc() {\r\n        if (this._doc === null) {\r\n            throw new Error(\"Doc not set\");\r\n        }\r\n        return this._doc;\r\n    }\r\n\r\n    set doc(doc: ComboPaintDocument) {\r\n        this._doc = doc;\r\n    }\r\n\r\n    get viewer() {\r\n        if (this._viewer === null) {\r\n            throw new Error(\"Viewer not set\");\r\n        }\r\n        return this._viewer;\r\n    }\r\n\r\n    set viewer(viewer: DocViewer) {\r\n        this._viewer = viewer;\r\n    }\r\n\r\n    constructor(eventHandler: PaintToolEventHandler | null = null, name: string | null = null) {\r\n        if (name === null) {\r\n            name = this.constructor.name;\r\n        }\r\n        this.name = name;\r\n        // this.eventHandler = eventHandler;\r\n        // this.eventHandler.bind(this);\r\n    }\r\n\r\n    static createFromStandardDoc(eventHandler: PaintToolEventHandler, doc: ComboPaintDocument, viewer: DocViewer) {\r\n        let tool = new this(eventHandler);\r\n        tool.doc = doc;\r\n        tool.viewer = viewer;\r\n        tool.eventHandler = viewer.paintToolEventHandler;\r\n        return tool;\r\n    }\r\n\r\n    onDown(point: PointerPoint) {\r\n        console.log(\"Down\");\r\n    }\r\n\r\n    onUp(point: PointerPoint) {\r\n        console.log(\"Up\");\r\n    }\r\n\r\n    onPressedMove(point: PointerPoint) {\r\n        console.log(\"PressedMove\");\r\n    }\r\n\r\n    onMove(point: PointerPoint) {\r\n        console.log(\"Move\");\r\n    }\r\n}\r\n", "import {CPLayer} from \"../Layers/CPLayer\";\r\nimport {PointerEventHandler, PointerPoint} from \"../Events/PointerEventHandler\";\r\nimport {PaintToolEventHandler} from \"../Events/PaintToolEventHandler\";\r\nimport {PaintTool} from \"./PaintTool\";\r\n\r\nexport class PaintTool2D extends PaintTool {\r\n\r\n\r\n    get ctx() {\r\n        return this.layer.ctx;\r\n    }\r\n\r\n    setFillStyle(style: string) {\r\n        this.ctx.fillStyle = style;\r\n    }\r\n\r\n    setFillRGB(r: number, g: number, b: number) {\r\n        this.setFillStyle(`rgb(${r}, ${g}, ${b})`);\r\n    }\r\n\r\n    drawLine(x1: number, y1: number, x2: number, y2: number) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(x1, y1);\r\n        this.ctx.lineTo(x2, y2);\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    drawLineFromPoint(p1: PointerPoint, p2: PointerPoint) {\r\n        this.drawLine(p1.x, p1.y, p2.x, p2.y);\r\n    }\r\n\r\n    drawCircle(x: number, y: number, radius: number) {\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(x, y, radius, 0, 2 * Math.PI);\r\n        this.ctx.stroke();\r\n    }\r\n}\r\n", "import {PaintTool2D} from \"./PaintTool2D\";\r\nimport {PointerPoint} from \"../Events/PointerEventHandler\";\r\n\r\nexport class BasicPen extends PaintTool2D {\r\n\r\n    onPressedMove(point: PointerPoint) {\r\n        super.onPressedMove(point);\r\n        let lastPoint = this.eventHandler.lastPoint;\r\n\r\n        if (lastPoint !== null) {\r\n            console.log(\"Drawing line from \" + lastPoint.x + \", \" + lastPoint.y + \" to \" + point.x + \", \" + point.y);\r\n            this.setFillRGB(0, 0, 0);\r\n            this.drawLine(lastPoint.x, lastPoint.y, point.x, point.y);\r\n            this.viewer.render();\r\n        }\r\n    }\r\n}\r\n", "import {DocViewer} from \"./DocViewer\";\r\nimport ComboPaintDocument from \"./ComboPaintDocument\";\r\nimport {CPLayer} from \"./Layers/CPLayer\";\r\nimport {BackgroundLayer} from \"./Layers/BackgroundLayer\";\r\nimport {PointerEventHandler} from \"./Events/PointerEventHandler\";\r\nimport {BasicPen} from \"./PaintTools/BasicPen\";\r\nimport {PaintToolEventHandler} from \"./Events/PaintToolEventHandler\";\r\n\r\n\r\nfunction main() {\r\n    let viewCanvas = document.getElementById(\"viewCanvas\") as HTMLCanvasElement;\r\n    let width = 100;\r\n    let height = 100;\r\n    let layer0 = new BackgroundLayer(width, height, \"checkerboard\");\r\n    let layer1 = new CPLayer(width, height, \"Layer 1\");\r\n    layer1.ctx.strokeStyle = \"black\";\r\n    layer1.ctx.moveTo(10, 10);\r\n    layer1.ctx.lineTo(width - 10, height - 10);\r\n    layer1.ctx.stroke();\r\n    let layer2 = new CPLayer(width, height, \"red\");\r\n    layer2.ctx.fillStyle = \"red\";\r\n    layer2.ctx.fillRect(0, 0, width, height);\r\n    layer2.opacity = 0.2;\r\n\r\n    console.debug(\"Creating document\");\r\n    console.debug(\"Adding layers\");\r\n\r\n\r\n    let paintToolEventHandler = new PaintToolEventHandler();\r\n    PointerEventHandler.bindWithElement(paintToolEventHandler, viewCanvas);\r\n\r\n    let pen = new BasicPen();\r\n\r\n\r\n    pen.setLayer(layer1);\r\n\r\n\r\n    let doc = new ComboPaintDocument(width, height);\r\n\r\n    doc.addLayer(layer0);\r\n    doc.addLayer(layer1);\r\n    doc.addLayer(layer2);\r\n    doc.render();\r\n\r\n    let docViewer = new DocViewer(viewCanvas, doc);\r\n\r\n    pen.doc = doc;\r\n    pen.viewer = docViewer;\r\n\r\n    pen.eventHandler = docViewer.paintToolEventHandler;\r\n    docViewer.render();\r\n}\r\n\r\nmain();\r\nconsole.log(\"Main.ts loaded\");\r\n"],
  "mappings": ";AAAO,IAAM,gBAAN,MAAoB;AAAA,EAMvB,YAAa,SAA4C,MAAM,QAAgB,MAAO;AALtF,kBAA4B,SAAS,cAAc,QAAQ;AAC3D,SAAQ,aAAsE;AAC9E,SAAQ,QAAiB;AACzB,SAAQ,QAAiB;AAGrB,SAAK,UAAU,QAAQ,KAAK;AAAA,EAChC;AAAA,EAEA,UAAU,SAA4C,MAAM,QAAgB,MAAM;AAC9E,QAAI,OAAO,WAAW,UAAU;AAC5B,eAAS,SAAS,eAAe,MAAM;AACvC,UAAI,CAAC,QAAQ;AACT,cAAM,IAAI,MAAM,sBAAsB;AAAA,MAC1C;AAAA,IACJ,WAAW,WAAW,MAAM;AACxB,eAAS,SAAS,cAAc,QAAQ;AAAA,IAC5C;AACA,SAAK,SAAS;AACd,SAAK,OAAO,KAAK;AAAA,EACrB;AAAA,EAEA,IAAI,MAAM;AACN,QAAI,KAAK,OAAO;AAEZ,aAAO,KAAK;AAAA,IAChB;AACA,UAAM,IAAI,MAAM,mBAAmB;AAAA,EACvC;AAAA,EACA,IAAI,IAAI,KAAgC;AACpC,YAAQ,IAAI,uCAAuC;AAAA,EACvD;AAAA,EAEA,IAAI,KAAK;AACL,QAAI,KAAK,OAAO;AACZ,aAAO,KAAK;AAAA,IAChB;AACA,UAAM,IAAI,MAAM,sBAAsB;AAAA,EAC1C;AAAA,EAEA,OAAO,OAAe;AAClB,SAAK,aAAa,KAAK,OAAO,WAAW,KAAK;AAC9C,QAAI,KAAK,eAAe,MAAM;AAC1B,YAAM,IAAI,MAAM,0BAA0B,QAAQ;AAAA,IACtD;AACA,QAAI,UAAU,MAAM;AAChB,WAAK,QAAQ;AAAA,IACjB;AACA,QAAI,UAAU,SAAS;AACnB,WAAK,QAAQ;AAAA,IACjB;AAAA,EACJ;AAAA,EAEA,IAAI,MAAM,OAAe;AACrB,SAAK,OAAO,QAAQ;AAAA,EACxB;AAAA,EAEA,IAAI,OAAO,QAAgB;AACvB,SAAK,OAAO,SAAS;AAAA,EACzB;AAAA,EAEA,IAAI,QAAQ;AACR,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EAEA,IAAI,SAAS;AACT,WAAO,KAAK,OAAO;AAAA,EACvB;AACJ;;;ACrEO,IAAM,OAAN,MAAW;AAAA,EAId,YAAY,MAAc,OAA2B,QAAW;AAC5D,SAAK,IAAI;AACT,QAAI,SAAS,QAAW;AACpB,WAAK,IAAI;AAAA,IACb,OAAO;AACH,WAAK,IAAI;AAAA,IACb;AAAA,EACJ;AAAA,EAEA,IAAI,OAAa;AACb,WAAO,IAAI,KAAK,KAAK,IAAI,MAAM,GAAG,KAAK,IAAI,MAAM,CAAC;AAAA,EACtD;AAAA,EAEA,IAAI,OAAa;AACb,WAAO,IAAI,KAAK,KAAK,IAAI,MAAM,GAAG,KAAK,IAAI,MAAM,CAAC;AAAA,EACtD;AAAA,EAEA,IAAI,OAAa;AACb,WAAO,IAAI,KAAK,KAAK,IAAI,MAAM,GAAG,KAAK,IAAI,MAAM,CAAC;AAAA,EACtD;AAAA,EAEA,IAAI,OAAa;AACb,WAAO,IAAI,KAAK,KAAK,IAAI,MAAM,GAAG,KAAK,IAAI,MAAM,CAAC;AAAA,EACtD;AAAA,EAEA,MAAM,QAAgB;AAClB,WAAO,IAAI,KAAK,KAAK,IAAI,QAAQ,KAAK,IAAI,MAAM;AAAA,EACpD;AAAA,EAEA,IAAI,OAAa;AACb,WAAO,KAAK,IAAI,MAAM,IAAI,KAAK,IAAI,MAAM;AAAA,EAC7C;AAAA,EAEA,SAAS;AACL,WAAO,KAAK,KAAK,KAAK,IAAI,IAAI,CAAC;AAAA,EACnC;AAAA,EAEA,YAAY;AACR,WAAO,KAAK,MAAM,IAAI,KAAK,OAAO,CAAC;AAAA,EACvC;AAAA,EAEA,OAAO,OAAe;AAClB,QAAI,MAAM,KAAK,IAAI,KAAK;AACxB,QAAI,MAAM,KAAK,IAAI,KAAK;AACxB,WAAO,IAAI,KAAK,KAAK,IAAI,MAAM,KAAK,IAAI,KAAK,KAAK,IAAI,MAAM,KAAK,IAAI,GAAG;AAAA,EAC5E;AAAA,EAEA,QAAQ;AACJ,WAAO,KAAK,MAAM,KAAK,GAAG,KAAK,CAAC;AAAA,EACpC;AAAA,EAEA,QAAQ,OAAa;AACjB,WAAO,MAAM,MAAM,IAAI,KAAK,MAAM;AAAA,EACtC;AACJ;;;AC1DA,IAAqB,eAArB,MAAuD;AAAA,EAAvD;AACI,kBAAwC,CAAC;AAAA;AAAA,EAEzC,cAAc,OAAa,UAAoB;AAC3C,QAAI,KAAK,OAAO,WAAW,QAAW;AAClC,WAAK,OAAO,SAAS,CAAC;AAAA,IAC1B;AACA,SAAK,OAAO,OAAO,KAAK,QAAQ;AAAA,EACpC;AAAA,EAEA,aAAa,UAAgB,MAAa;AACtC,QAAI,KAAK,OAAO,WAAW,QAAW;AAClC,eAAS,YAAY,KAAK,OAAO,QAAQ;AACrC,iBAAS,GAAG,IAAI;AAAA,MACpB;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,YAAY,OAAa;AACrB,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EAEA,eAAe,OAAa,UAAoB;AAC5C,QAAI,KAAK,OAAO,WAAW,QAAW;AAClC,WAAK,OAAO,SAAS,KAAK,OAAO,OAAO,OAAO,CAAC,UAAU;AACtD,eAAO,UAAU;AAAA,MACrB,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,kBAAkB;AACd,SAAK,SAAS,CAAC;AAAA,EACnB;AAEJ;;;AC7BO,IAAM,eAAN,MAAmB;AAAA,EAItB,YAAY,KAAW,UAAkB;AACrC,SAAK,MAAM;AACX,SAAK,WAAW;AAAA,EACpB;AAAA,EAEA,OAAO,2BAA2B,GAA+B;AAC7D,WAAO,IAAI,aAAa,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,GAAG,EAAE,QAAQ;AAAA,EACtE;AAAA,EAEA,IAAI,IAAI;AACJ,WAAO,KAAK,IAAI;AAAA,EACpB;AAAA,EAEA,IAAI,IAAI;AACJ,WAAO,KAAK,IAAI;AAAA,EACpB;AACJ;AAEO,IAAM,sBAAN,cAAkC,aAA+B;AAAA,EACpE,cAAc;AACV,UAAM;AAsBV,mBAAmB;AACnB,qBAAiC;AAtB7B,YAAQ,IAAI,6BAA6B;AACzC,SAAK,cAAc,OAAO,KAAK,MAAM,KAAK,IAAI,CAAC;AAAA,EACnD;AAAA,EAEA,OAAO,sBAAsB,SAAsB;AAC/C,QAAI,UAAU,IAAI,oBAAoB;AACtC,wBAAoB,gBAAgB,SAAS,OAAO;AACpD,WAAO;AAAA,EACX;AAAA,EAEA,OAAO,gBAAgB,SAA8B,SAAsB;AACvE,YAAQ,iBAAiB,eAAe,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC7E,YAAQ,iBAAiB,aAAa,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC3E,YAAQ,iBAAiB,eAAe,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC7E,YAAQ,iBAAiB,gBAAgB,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC9E,YAAQ,iBAAiB,gBAAgB,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC9E,YAAQ,iBAAiB,eAAe,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC7E,YAAQ,iBAAiB,cAAc,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAC5E,YAAQ,iBAAiB,iBAAiB,QAAQ,gBAAgB,KAAK,OAAO,CAAC;AAAA,EACnF;AAAA,EAKA,gBAAgB,UAAwB;AACpC,SAAK,aAAa,OAAO,QAAQ;AAAA,EACrC;AAAA,EAEA,MAAM,UAAwB,YAAuB,MAAM;AACvD,QAAI,QAAQ,aAAa,2BAA2B,QAAQ;AAC5D,QAAI,cAAc,MAAM;AACpB,YAAM,MAAM;AAAA,IAChB;AAGA,YAAQ,SAAS,MAAM;AAAA,MACnB,KAAK;AACD,aAAK,aAAa,QAAQ,KAAK;AAC/B,aAAK,UAAU;AACf;AAAA,MACJ,KAAK;AACD,aAAK,aAAa,MAAM,KAAK;AAC7B,aAAK,UAAU;AACf;AAAA,MACJ,KAAK;AACD,aAAK,aAAa,QAAQ,KAAK;AAC/B,YAAI,KAAK,SAAS;AACd,eAAK,aAAa,eAAe,KAAK;AAAA,QAC1C;AACA;AAAA,MACJ,KAAK;AACD,aAAK,aAAa,SAAS,KAAK;AAChC;AAAA,MACJ,KAAK;AACD,aAAK,aAAa,SAAS,KAAK;AAChC,aAAK,UAAU;AACf;AAAA,IACR;AACA,SAAK,YAAY;AAAA,EACrB;AACJ;;;ACvFO,IAAM,wBAAN,cAAoC,oBAAoB;AAAA,EAG3D,cAAc;AACV,UAAM;AAHV,iBAA0B;AAAA,EAI1B;AAAA,EAEA,IAAI,OAAO;AACP,QAAI,KAAK,UAAU,MAAM;AACrB,YAAM,IAAI,MAAM,cAAc;AAAA,IAClC;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAI,KAAK,MAAiB;AACtB,SAAK,QAAQ;AAAA,EACjB;AAAA,EAEA,KAAK,MAAiB;AAClB,SAAK,OAAO;AACZ,SAAK,cAAc,QAAQ,KAAK,OAAO,KAAK,IAAI,CAAC;AACjD,SAAK,cAAc,MAAM,KAAK,KAAK,KAAK,IAAI,CAAC;AAC7C,SAAK,cAAc,eAAe,KAAK,cAAc,KAAK,IAAI,CAAC;AAC/D,SAAK,cAAc,QAAQ,KAAK,OAAO,KAAK,IAAI,CAAC;AAAA,EACrD;AAAA,EAEA,OAAO,OAAqB;AACxB,SAAK,KAAK,OAAO,KAAK;AAAA,EAC1B;AAAA,EAEA,KAAK,OAAqB;AACtB,SAAK,KAAK,KAAK,KAAK;AAAA,EACxB;AAAA,EAEA,cAAc,OAAqB;AAC/B,SAAK,KAAK,cAAc,KAAK;AAAA,EACjC;AAAA,EAEA,OAAO,OAAqB;AACxB,SAAK,KAAK,OAAO,KAAK;AAAA,EAC1B;AACJ;;;ACjCO,IAAM,YAAN,cAAwB,cAAc;AAAA,EAQzC,YAAY,QAA2B,KAAyB;AAC5D,UAAM,MAAM;AACZ,SAAK,OAAO;AACZ,SAAK,YAAY,GAAG;AACpB,SAAK,SAAS,IAAI,eAAe;AACjC,QAAI,SAAS,IAAI,KAAK,GAAG,CAAC;AAE1B,QAAI,QAAQ;AACZ,WAAO,IAAK,KAAK,QAAS,IAAI,KAAK,IAAI,QAAQ,IAAI;AACnD,WAAO,IAAK,KAAK,SAAU,IAAI,KAAK,IAAI,SAAS,IAAI;AACrD,SAAK,MAAM,SAAS;AACpB,SAAK,MAAM,QAAQ,IAAI,KAAK,KAAK;AAEjC,SAAK,wBAAwB,IAAI,sBAAsB;AACvD,SAAK,qBAAqB,oBAAoB,sBAAsB,KAAK,MAAM;AAC/E,SAAK,mBAAmB,cAAc,OAAO,KAAK,iBAAiB,KAAK,IAAI,CAAC;AAAA,EAEjF;AAAA,EAEA,iBAAiB,KAAmB;AAChC,QAAI,MAAM,KAAK,gBAAgB,IAAI,SAAS,IAAI,OAAO;AACvD,SAAK,sBAAsB,aAAa,OAAO,KAAK,GAAG;AAAA,EAC3D;AAAA,EAGA,YAAY,KAAyB;AACjC,SAAK,OAAO;AAAA,EAChB;AAAA,EAEA,SAAS;AACL,YAAQ,IAAI,WAAW;AAEvB,SAAK,IAAI,YAAY;AACrB,SAAK,IAAI,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AAE/C,SAAK,UAAU;AACf,SAAK,aAAa;AAClB,YAAQ,IAAI,UAAU;AAAA,EAC1B;AAAA,EAEA,IAAI,QAAQ;AACR,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,MAAM;AACN,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,gBAAgB,GAAW,GAAW;AAClC,WAAO,IAAI;AAAA,OACN,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,MAAM,MAAM;AAAA,OAC5C,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,MAAM,MAAM;AAAA,IACjD;AAAA,EACJ;AAAA,EAEA,gBAAgB,GAAW,GAAW;AAClC,WAAO,IAAI;AAAA,MACP,IAAI,KAAK,MAAM,MAAM,IAAI,KAAK,MAAM,OAAO;AAAA,MAC3C,IAAI,KAAK,MAAM,MAAM,IAAI,KAAK,MAAM,OAAO;AAAA,IAC/C;AAAA,EACJ;AAAA,EAEA,YAAY;AACR,SAAK,IAAI,KAAK;AACd,SAAK,IAAI,UAAU,KAAK,MAAM,OAAO,GAAG,KAAK,MAAM,OAAO,CAAC;AAC3D,SAAK,IAAI,MAAM,KAAK,MAAM,MAAM,GAAG,KAAK,MAAM,MAAM,CAAC;AACrD,SAAK,IAAI,OAAO;AAChB,SAAK,IAAI,UAAU,KAAK,IAAI,QAAQ,GAAG,CAAC;AACxC,SAAK,IAAI,QAAQ;AAAA,EACrB;AAAA,EAEA,eAAe;AACX,SAAK,IAAI,cAAc;AACvB,SAAK,IAAI,YAAY;AACrB,SAAK,IAAI;AAAA,MACL,KAAK,MAAM,OAAO;AAAA,MAAG,KAAK,MAAM,OAAO;AAAA,MACvC,KAAK,IAAI,QAAQ,KAAK,MAAM,MAAM;AAAA,MAClC,KAAK,IAAI,SAAS,KAAK,MAAM,MAAM;AAAA,IACvC;AAAA,EACJ;AACJ;AAEA,IAAM,iBAAN,MAAqB;AAAA,EAArB;AACI,kBAAe,IAAI,KAAK,GAAG,CAAC;AAC5B,iBAAc,IAAI,KAAK,GAAG,CAAC;AAAA;AAC/B;;;ACpGA,IAAqB,qBAArB,cAAgD,cAAc;AAAA,EAqB1D,YAAY,SAAiB,KAAK,QAAgB,KAAK;AACnD,UAAM;AArBV,kBAAoB,CAAC;AAErB,yBAAgC;AAoB5B,SAAK,QAAQ;AACb,SAAK,SAAS;AAAA,EAClB;AAAA,EApBA,IAAI,SAAS;AACT,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EAEA,IAAI,OAAO,QAAgB;AACvB,SAAK,OAAO,SAAS;AAAA,EACzB;AAAA,EAEA,IAAI,QAAQ;AACR,WAAO,KAAK,OAAO;AAAA,EACvB;AAAA,EAEA,IAAI,MAAM,OAAe;AACrB,SAAK,OAAO,QAAQ;AAAA,EACxB;AAAA,EAQA,SAAS,OAAgB,QAAgB,KAAK,OAAO,QAAQ;AACzD,SAAK,OAAO,OAAO,OAAO,GAAG,KAAK;AAClC,QAAI,KAAK,iBAAiB,MAAM;AAC5B,WAAK,gBAAgB;AAAA,IACzB;AAAA,EACJ;AAAA,EAEA,aAAa,QAAmB;AAC5B,aAAS,SAAS,QAAQ;AACtB,WAAK,SAAS,KAAK;AAAA,IACvB;AAAA,EACJ;AAAA,EAEA,SAAS;AACL,SAAK,IAAI,UAAU,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AAChD,aAAS,SAAS,KAAK,QAAQ;AAC3B,cAAQ,IAAI,qBAAqB,MAAM,IAAI;AAC3C,UAAI,MAAM,SAAS;AAEf,aAAK,IAAI,cAAc,MAAM;AAC7B,gBAAQ,IAAI,KAAK,IAAI,wBAAwB;AAC7C,aAAK,IAAI,2BAA2B,MAAM;AAC1C,cAAM,OAAO;AACb,aAAK,IAAI,UAAU,MAAM,QAAQ,GAAG,CAAC;AAAA,MACzC;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,UAAU;AACN,WAAO,KAAK,OAAO,UAAU;AAAA,EACjC;AACJ;;;AC3DO,IAAM,UAAN,cAAsB,cAAc;AAAA,EAMvC,YAAY,OAAe,QAAgB,OAAe,aAAa;AACnE,UAAM;AACN,SAAK,QAAQ;AACb,SAAK,SAAS;AACd,SAAK,OAAO;AACZ,SAAK,UAAU;AACf,SAAK,UAAU;AAEf,SAAK,YAAY;AAAA,EACrB;AAAA,EAEA,SAAS;AAAA,EAET;AACJ;;;ACpBO,IAAM,kBAAN,cAA8B,QAAQ;AAAA,EAGzC,YAAY,OAAe,QAAgB,YAAoB,SAAS;AACpE,UAAM,OAAO,QAAQ,YAAY;AACjC,SAAK,YAAY;AAAA,EACrB;AAAA,EAEA,iBAAiB,QAAgB,QAAgB,MAAc;AAC3D,SAAK,IAAI,YAAY;AACrB,SAAK,IAAI,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AAC/C,YAAQ,IAAI,KAAK,KAAK;AACtB,SAAK,IAAI,YAAY;AACrB,aAAS,IAAI,GAAG,IAAI,KAAK,OAAO,KAAK,MAAM;AACvC,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,MAAM;AACxC,YAAK,IAAI,OAAQ,KAAM,IAAI,OAAQ,GAAG;AAClC,eAAK,IAAI,SAAS,GAAG,GAAG,MAAM,IAAI;AAAA,QACtC;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,SAAS;AACL,QAAI,KAAK,aAAa,gBAAgB;AAClC,cAAQ,IAAI,cAAc;AAC1B,WAAK,iBAAiB,WAAW,WAAW,EAAE;AAAA,IAClD,OAAO;AACH,WAAK,IAAI,YAAY,KAAK;AAC1B,WAAK,IAAI,SAAS,GAAG,GAAG,KAAK,OAAO,KAAK,MAAM;AAAA,IACnD;AAAA,EACJ;AACJ;;;AC3BO,IAAM,YAAN,MAAgB;AAAA,EA4DnB,YAAY,eAA6C,MAAM,OAAsB,MAAM;AA1D3F,yBAA8C;AAE9C,yBAAgC;AAEhC,kBAAyB;AACzB,gBAAkC;AAClC,mBAA4B;AAqDxB,QAAI,SAAS,MAAM;AACf,aAAO,KAAK,YAAY;AAAA,IAC5B;AACA,SAAK,OAAO;AAAA,EAGhB;AAAA,EAzDA,SAAS,OAAgB;AACrB,YAAQ,MAAM,sBAAsB,MAAM,IAAI;AAC9C,SAAK,SAAS;AAAA,EAClB;AAAA,EAEA,IAAI,QAAQ;AACR,QAAI,KAAK,WAAW,MAAM;AACtB,YAAM,IAAI,MAAM,eAAe;AAAA,IACnC;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,eAAe;AACf,QAAI,KAAK,kBAAkB,MAAM;AAC7B,YAAM,IAAI,MAAM,uBAAuB;AAAA,IAC3C;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,aAAa,cAAqC;AAClD,YAAQ,IAAI,uBAAuB;AACnC,SAAK,gBAAgB;AAAA,EACzB;AAAA,EAEA,IAAI,SAAS;AACT,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EAEA,IAAI,MAAM;AACN,QAAI,KAAK,SAAS,MAAM;AACpB,YAAM,IAAI,MAAM,aAAa;AAAA,IACjC;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,IAAI,KAAyB;AAC7B,SAAK,OAAO;AAAA,EAChB;AAAA,EAEA,IAAI,SAAS;AACT,QAAI,KAAK,YAAY,MAAM;AACvB,YAAM,IAAI,MAAM,gBAAgB;AAAA,IACpC;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,OAAO,QAAmB;AAC1B,SAAK,UAAU;AAAA,EACnB;AAAA,EAWA,OAAO,sBAAsB,cAAqC,KAAyB,QAAmB;AAC1G,QAAI,OAAO,IAAI,KAAK,YAAY;AAChC,SAAK,MAAM;AACX,SAAK,SAAS;AACd,SAAK,eAAe,OAAO;AAC3B,WAAO;AAAA,EACX;AAAA,EAEA,OAAO,OAAqB;AACxB,YAAQ,IAAI,MAAM;AAAA,EACtB;AAAA,EAEA,KAAK,OAAqB;AACtB,YAAQ,IAAI,IAAI;AAAA,EACpB;AAAA,EAEA,cAAc,OAAqB;AAC/B,YAAQ,IAAI,aAAa;AAAA,EAC7B;AAAA,EAEA,OAAO,OAAqB;AACxB,YAAQ,IAAI,MAAM;AAAA,EACtB;AACJ;;;AC7FO,IAAM,cAAN,cAA0B,UAAU;AAAA,EAGvC,IAAI,MAAM;AACN,WAAO,KAAK,MAAM;AAAA,EACtB;AAAA,EAEA,aAAa,OAAe;AACxB,SAAK,IAAI,YAAY;AAAA,EACzB;AAAA,EAEA,WAAW,GAAW,GAAW,GAAW;AACxC,SAAK,aAAa,OAAO,MAAM,MAAM,IAAI;AAAA,EAC7C;AAAA,EAEA,SAAS,IAAY,IAAY,IAAY,IAAY;AACrD,SAAK,IAAI,UAAU;AACnB,SAAK,IAAI,OAAO,IAAI,EAAE;AACtB,SAAK,IAAI,OAAO,IAAI,EAAE;AACtB,SAAK,IAAI,OAAO;AAAA,EACpB;AAAA,EAEA,kBAAkB,IAAkB,IAAkB;AAClD,SAAK,SAAS,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AAAA,EACxC;AAAA,EAEA,WAAW,GAAW,GAAW,QAAgB;AAC7C,SAAK,IAAI,UAAU;AACnB,SAAK,IAAI,IAAI,GAAG,GAAG,QAAQ,GAAG,IAAI,KAAK,EAAE;AACzC,SAAK,IAAI,OAAO;AAAA,EACpB;AACJ;;;ACjCO,IAAM,WAAN,cAAuB,YAAY;AAAA,EAEtC,cAAc,OAAqB;AAC/B,UAAM,cAAc,KAAK;AACzB,QAAI,YAAY,KAAK,aAAa;AAElC,QAAI,cAAc,MAAM;AACpB,cAAQ,IAAI,uBAAuB,UAAU,IAAI,OAAO,UAAU,IAAI,SAAS,MAAM,IAAI,OAAO,MAAM,CAAC;AACvG,WAAK,WAAW,GAAG,GAAG,CAAC;AACvB,WAAK,SAAS,UAAU,GAAG,UAAU,GAAG,MAAM,GAAG,MAAM,CAAC;AACxD,WAAK,OAAO,OAAO;AAAA,IACvB;AAAA,EACJ;AACJ;;;ACPA,SAAS,OAAO;AACZ,MAAI,aAAa,SAAS,eAAe,YAAY;AACrD,MAAI,QAAQ;AACZ,MAAI,SAAS;AACb,MAAI,SAAS,IAAI,gBAAgB,OAAO,QAAQ,cAAc;AAC9D,MAAI,SAAS,IAAI,QAAQ,OAAO,QAAQ,SAAS;AACjD,SAAO,IAAI,cAAc;AACzB,SAAO,IAAI,OAAO,IAAI,EAAE;AACxB,SAAO,IAAI,OAAO,QAAQ,IAAI,SAAS,EAAE;AACzC,SAAO,IAAI,OAAO;AAClB,MAAI,SAAS,IAAI,QAAQ,OAAO,QAAQ,KAAK;AAC7C,SAAO,IAAI,YAAY;AACvB,SAAO,IAAI,SAAS,GAAG,GAAG,OAAO,MAAM;AACvC,SAAO,UAAU;AAEjB,UAAQ,MAAM,mBAAmB;AACjC,UAAQ,MAAM,eAAe;AAG7B,MAAI,wBAAwB,IAAI,sBAAsB;AACtD,sBAAoB,gBAAgB,uBAAuB,UAAU;AAErE,MAAI,MAAM,IAAI,SAAS;AAGvB,MAAI,SAAS,MAAM;AAGnB,MAAI,MAAM,IAAI,mBAAmB,OAAO,MAAM;AAE9C,MAAI,SAAS,MAAM;AACnB,MAAI,SAAS,MAAM;AACnB,MAAI,SAAS,MAAM;AACnB,MAAI,OAAO;AAEX,MAAI,YAAY,IAAI,UAAU,YAAY,GAAG;AAE7C,MAAI,MAAM;AACV,MAAI,SAAS;AAEb,MAAI,eAAe,UAAU;AAC7B,YAAU,OAAO;AACrB;AAEA,KAAK;AACL,QAAQ,IAAI,gBAAgB;",
  "names": []
}
